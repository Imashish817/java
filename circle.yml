machine:
  pre:
    - curl -sSL https://s3.amazonaws.com/circle-downloads/install-circleci-docker.sh | bash -s -- 1.10.0

  services:
    - docker

  environment:
    ORACLE_6_JAVA_MAJOR_VERSION: '6'
    ORACLE_6_JAVA_UPDATE_VERSION: '45'
    ORACLE_6_JAVA_BUILD_NUMBER: '06'

    ORACLE_7_JAVA_MAJOR_VERSION: '7'
    ORACLE_7_JAVA_UPDATE_VERSION: '80'
    ORACLE_7_JAVA_BUILD_NUMBER: '15'

    ORACLE_8_JAVA_MAJOR_VERSION: '8'
    ORACLE_8_JAVA_UPDATE_VERSION: '77'
    ORACLE_8_JAVA_BUILD_NUMBER: '03'

    OPENJDK_8_JAVA_MAJOR_VERSION: '8'
    OPENJDK_8_JAVA_UPDATE_VERSION: '77'
    OPENJDK_8_JAVA_BUILD_NUMBER: '03-r0'

    OPENJDK_7_JAVA_MAJOR_VERSION: '7'
    OPENJDK_7_JAVA_UPDATE_VERSION: '91'
    OPENJDK_7_JAVA_BUILD_NUMBER: '2.6.3-r1'

dependencies:
  override:
    - docker version
    - docker info
    # OpenJDK 8
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjdk8 jdk $OPENJDK_8_JAVA_MAJOR_VERSION latest $OPENJDK_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjdk8.$OPENJDK_8_JAVA_UPDATE_VERSION.$OPENJDK_8_JAVA_BUILD_NUMBER jdk $OPENJDK_8_JAVA_MAJOR_VERSION $OPENJDK_8_JAVA_UPDATE_VERSION $OPENJDK_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjre8 jdk $OPENJDK_8_JAVA_MAJOR_VERSION latest $OPENJDK_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjre8.$OPENJDK_8_JAVA_UPDATE_VERSION.$OPENJDK_8_JAVA_BUILD_NUMBER jdk $OPENJDK_8_JAVA_MAJOR_VERSION $OPENJDK_8_JAVA_UPDATE_VERSION $OPENJDK_8_JAVA_BUILD_NUMBER

    # OpenJDK 7
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjdk7 jdk $OPENJDK_7_JAVA_MAJOR_VERSION latest $OPENJDK_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjdk7.$OPENJDK_7_JAVA_UPDATE_VERSION.$OPENJDK_7_JAVA_BUILD_NUMBER jdk $OPENJDK_7_JAVA_MAJOR_VERSION $OPENJDK_7_JAVA_UPDATE_VERSION $OPENJDK_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjre7 jre $OPENJDK_7_JAVA_MAJOR_VERSION latest $OPENJDK_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-openjdk/Dockerfile openjre7.$OPENJDK_7_JAVA_UPDATE_VERSION.$OPENJDK_7_JAVA_BUILD_NUMBER jre $OPENJDK_7_JAVA_MAJOR_VERSION $OPENJDK_7_JAVA_UPDATE_VERSION $OPENJDK_7_JAVA_BUILD_NUMBER

    # JDK 8
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jdk8 jdk $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jdk8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jdk $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jdk8 jdk $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jdk8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jdk $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER

    # JRE 8
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jre8 server-jre $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jre8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER server-jre $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jre8 server-jre $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jre8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER server-jre $ORACLE_8_JAVA_MAJOR_VERSION $ORACLE_8_JAVA_UPDATE_VERSION $ORACLE_8_JAVA_BUILD_NUMBER

    # JDK 7
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jdk7 jdk $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jdk7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jdk $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jdk7 jdk $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jdk7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jdk $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER

    # JRE 7
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jre7 server-jre $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-alpine/Dockerfile jre7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER server-jre $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jre7 server-jre $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-oracle-centos/Dockerfile centos.jre7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER server-jre $ORACLE_7_JAVA_MAJOR_VERSION $ORACLE_7_JAVA_UPDATE_VERSION $ORACLE_7_JAVA_BUILD_NUMBER

    # JDK 6
    - ./buildscripts/buildImage.sh java-jdk-6-centos/Dockerfile centos.jdk6 jdk $ORACLE_6_JAVA_MAJOR_VERSION $ORACLE_6_JAVA_UPDATE_VERSION $ORACLE_6_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-jdk-6-centos/Dockerfile centos.jdk6.$ORACLE_6_JAVA_UPDATE_VERSION.$ORACLE_6_JAVA_BUILD_NUMBER jdk $ORACLE_6_JAVA_MAJOR_VERSION $ORACLE_6_JAVA_UPDATE_VERSION $ORACLE_6_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-jdk-6-alpine/Dockerfile jdk6 jdk $ORACLE_6_JAVA_MAJOR_VERSION $ORACLE_6_JAVA_UPDATE_VERSION $ORACLE_6_JAVA_BUILD_NUMBER
    - ./buildscripts/buildImage.sh java-jdk-6-alpine/Dockerfile jdk6.$ORACLE_6_JAVA_UPDATE_VERSION.$ORACLE_6_JAVA_BUILD_NUMBER jdk $ORACLE_6_JAVA_MAJOR_VERSION $ORACLE_6_JAVA_UPDATE_VERSION $ORACLE_6_JAVA_BUILD_NUMBER

test:
  override:
    # OpenJDK 8
    - ./buildscripts/testImage.sh openjdk8 jdk true
    - ./buildscripts/testImage.sh openjdk8.$OPENJDK_8_JAVA_UPDATE_VERSION.$OPENJDK_8_JAVA_BUILD_NUMBER jdk true
    - ./buildscripts/testImage.sh openjre8 jre true
    - ./buildscripts/testImage.sh openjre8.$OPENJDK_8_JAVA_UPDATE_VERSION.$OPENJDK_8_JAVA_BUILD_NUMBER jre true

    # OpenJDK 7
    - ./buildscripts/testImage.sh openjdk7 jdk true
    - ./buildscripts/testImage.sh openjdk7.$OPENJDK_7_JAVA_UPDATE_VERSION.$OPENJDK_7_JAVA_BUILD_NUMBER jdk true
    - ./buildscripts/testImage.sh openjre7 jre true
    - ./buildscripts/testImage.sh openjre7.$OPENJDK_7_JAVA_UPDATE_VERSION.$OPENJDK_7_JAVA_BUILD_NUMBER jre true

    # JDK 8
    - ./buildscripts/testImage.sh centos.jdk8 jdk true
    - ./buildscripts/testImage.sh centos.jdk8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jdk true
    - ./buildscripts/testImage.sh jdk8 jdk true
    - ./buildscripts/testImage.sh jdk8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jdk true

    # JRE 8
    - ./buildscripts/testImage.sh centos.jre8 jre true
    - ./buildscripts/testImage.sh centos.jre8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jre true
    - ./buildscripts/testImage.sh jre8 jre true
    - ./buildscripts/testImage.sh jre8.$ORACLE_8_JAVA_UPDATE_VERSION.$ORACLE_8_JAVA_BUILD_NUMBER jre true

    # JDK 7
    - ./buildscripts/testImage.sh centos.jdk7 jdk true
    - ./buildscripts/testImage.sh centos.jdk7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jdk true
    - ./buildscripts/testImage.sh jdk7 jdk true
    - ./buildscripts/testImage.sh jdk7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jdk true

    # JRE 7
    - ./buildscripts/testImage.sh centos.jre7 jre true
    - ./buildscripts/testImage.sh centos.jre7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jre true
    - ./buildscripts/testImage.sh jre7 jre true
    - ./buildscripts/testImage.sh jre7.$ORACLE_7_JAVA_UPDATE_VERSION.$ORACLE_7_JAVA_BUILD_NUMBER jre true

    # JDK 6
    - ./buildscripts/testImage.sh centos.jdk6 jdk
    - ./buildscripts/testImage.sh centos.jdk6.$ORACLE_6_JAVA_UPDATE_VERSION.$ORACLE_6_JAVA_BUILD_NUMBER jdk
    - ./buildscripts/testImage.sh jdk6 jdk
    - ./buildscripts/testImage.sh jdk6.$ORACLE_6_JAVA_UPDATE_VERSION.$ORACLE_6_JAVA_BUILD_NUMBER jdk
